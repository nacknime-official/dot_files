#--------#
# BASICS #
#--------#

# mod
set $mod Mod4
set $alt Mod1

# font
font pango:FiraGO 12

#-----------------------------#
# WINDOW / WORKSPACE COMMANDS #
#-----------------------------#
# drag floating key
floating_modifier $alt

# kill focused window

# change focus

# alternatively, you can use the cursor keys:

# move focused window

# alternatively, you can use the cursor keys:

# toggle split

# enter fullscreen mode for the focused container

# toggle tiling / floating

workspace_auto_back_and_forth yes

# Make the currently focused window a scratchpad

# Show the first scratchpad window

# Sticky floating windows


# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# switch to workspace

# move focused container to workspace


mode "resize" {
    bindsym --to-code {
        h resize shrink width 10 px
        j resize grow height 10 px
        k resize shrink height 10 px
        l resize grow width 10 px

        Left resize shrink width 10 px
        Down resize grow height 10 px
        Up resize shrink height 10 px
        Right resize grow width 10 px

        Return mode "default"
        Escape mode "default"
        $mod+r mode "default"
    }
}


#----------------#o
# BASIC BINDINGS #
#----------------#

# drun

# clipmenu

# calc

# NetworkManager

# Power-menu

# print screen

# emoji picker

# terminal
#bindsym $mod+Shift+Return exec kitty --title="i3-float"

# File Manager


# Firefox

# Telegram

#------#
# GAPS #
#------#

#smart_gaps on

set $outer 2
set $inner 3
gaps outer $outer
gaps inner $inner

#------------#
# APPEARANCE #
#------------#

#smart_borders on

# window border
#for_window [class="^.*"] default_border pixel 1
default_border pixel 1

set $fg #ebece6
set $bg #161520
set $cl0 #29282f
set $cl1 #bf3032
set $cl2 #30bf54
set $cl3 #b1bf30
set $cl4 #303ebf
set $cl5 #aa30bf
set $cl6 #30a7bf
set $cl7 #bfbfb8
set $cl8 #63626a
set $cl9 #fa3e48
set $cl10 #50fa7b
set $cl11 #d7e267
set $cl12 #4665da
set $cl13 #bc43d2
set $cl14 #67c6da
set $cl15 #ebece6

# class                 border  backgr. text   indicator child_border
client.focused          $cl7    $bg     $fg    $fg       $fg
client.focused_inactive $cl0    $bg     $fg    $bg       $bg
client.unfocused        $cl0    $bg     $fg    $bg       $bg
client.urgent           $cl13   $bg     $cl13  $bg       $cl13
client.placeholder      $bg     $bg     $fg    $bg       $fg

client.background       $bg

#----------------------#
# STARTUP APPLICATIONS #
#----------------------#

exec_always swayidle -w timeout 300 'swaylock -f -i ~/.config/sway/wp_blur.png' timeout 360 'swaymsg "output * dpms off"' resume 'swaymsg "output * dpms on"' before-sleep 'swaylock -f -i ~/.config/sway/wp_blur.png'
#exec_always xrandr --dpi 120
exec_always ~/stretchly/stretchly
# Keyboard layout
#exec_always setxkbmap -layout us,ru && setxkbmap -option 'grp:alt_shift_toggle' &

#exec_always nitrogen --restore &
#exec_always xrdb ~/.Xresources &
exec_always autotiling
#exec_always bash ~/.config/polybar/launch.sh
#exec_always dunst
exec_always mako
exec telegram-desktop -startintray &
#exec_always killall compton; compton --config ~/.config/compton/compton.conf &
#exec_always killall conky; conky &

exec /usr/lib/polkit-kde-authentication-agent-1 &
#exec udiskie &
#exec nextcloud --background &
#exec wg-quick up wg0-client.conf &
exec /usr/lib/kdeconnectd &
#exec xcalib -v '/home/soul/Acer Swift 3 SF315-41.icm' &
exec redshift &

#---------------#
# SPECIAL CASES #
#---------------#

# Telegram
for_window [app_id="telegramdesktop"]                           floating enable,    resize set 452 1039,    move position 20 0
for_window [title="Media viewer"]                       fullscreen enable

# KeePassXC
for_window [app_id="org.keepassxc.KeePassXC"]                          floating enable,    resize set 1280 720,    move position center

# pcmanfm
for_window [class="(?i)pcmanfm" window_type="normal"]   floating enable,    resize set 1280 720,    move position center

# sxiv
for_window [class="Sxiv"]                               floating enable,    resize set 1280 720,    move position center

# libreoffice
for_window [class="Soffice"]                                                resize set 1000 750,    move position center

# Yad popup calendar
for_window [class="Yad" title="yad-calendar"]           floating enable

# Make window with specified title float
for_window [title="^i3-float$"]                         floating enable,    resize set 1280 720,    move position center

for_window [window_role="About"]                        floating enable

for_window [class="^Steam$" title="^Steam Guard - Computer Authorization Required$"] floating enable,    resize set 380 420

for_window [app_id="org.kde.polkit-kde-authentication-agent-1"] floating enable
for_window [app_id="nm-connection-editor"] floating enable

#------------#
# MEDIA KEYS #
#------------#

# audio controls

# screen brightness controls

#floating_maximum_size 1900 x 1060
#floating_minimum_size -1 x -1

#-------------#
# ASSIGNMENTS #
#-------------#

assign [app_id="firefox"] $ws2
assign [class="code-oss"] $ws3
assign [class="VSCodium"] $ws3
assign [class="qBittorrent" window_type="normal"] $ws4
assign [class="Transmission" window_type="normal"] $ws4
assign [class="Deluge" window_type="normal"] $ws4
assign [class="mpv"] $ws5
assign [class="Steam" title="Steam"] $ws6
assign [class="discord"] $ws7
for_window [class="Spotify"] move to workspace $ws10

# vim: set ft=i3config:

#--------------#
# INPUT CONFIG #
#--------------#

input "1267:32:Elan_Touchpad" {
    dwt enabled
    tap enabled
    #natural_scroll enabled
    middle_emulation enabled
}

input * xkb_layout "us,ru"
input * xkb_options "grp:alt_shift_toggle"

# bar
bar {
    swaybar_command waybar
}

output "*" background wp.png fill
#output eDP-1 scale 

xwayland enable
exec xrdb -load ~/.Xresources


bindsym --to-code {
    $mod+q kill
    $alt+F4 kill
    $mod+h focus left
    $mod+j focus down
    $mod+k focus up
    $mod+l focus right
    $mod+Left focus left
    $mod+Down focus down
    $mod+Up focus up
    $mod+Right focus right
    $mod+Shift+h move left
    $mod+Shift+j move down
    $mod+Shift+k move up
    $mod+Shift+l move right
    $mod+Shift+Left move left
    $mod+Shift+Down move down
    $mod+Shift+Up move up
    $mod+Shift+Right move right
    $mod+v split toggle
    $mod+f fullscreen toggle
    $mod+b floating toggle, resize set 1280 720, move position center
    $mod+Shift+z move scratchpad
    $mod+z scratchpad show
    $mod+w sticky toggle
    $mod+Shift+w sticky enable, floating enable, resize set 480 270
    $mod+p layout toggle tabbed split
    $mod+1 workspace $ws1
    $mod+2 workspace $ws2
    $mod+3 workspace $ws3
    $mod+4 workspace $ws4
    $mod+5 workspace $ws5
    $mod+6 workspace $ws6
    $mod+7 workspace $ws7
    $mod+8 workspace $ws8
    $mod+9 workspace $ws9
    $mod+0 workspace $ws10
    $mod+Shift+1 move container to workspace $ws1
    $mod+Shift+2 move container to workspace $ws2
    $mod+Shift+3 move container to workspace $ws3
    $mod+Shift+4 move container to workspace $ws4
    $mod+Shift+5 move container to workspace $ws5
    $mod+Shift+6 move container to workspace $ws6
    $mod+Shift+7 move container to workspace $ws7
    $mod+Shift+8 move container to workspace $ws8
    $mod+Shift+9 move container to workspace $ws9
    $mod+Shift+0 move container to workspace $ws10
    $mod+y move workspace to output up
    $mod+r mode "resize"
    $mod+d exec ~/.config/rofi/rofi.sh -d
    $alt+v exec ~/.config/rofi/rofi.sh -l
    $mod+c exec ~/.config/rofi/rofi.sh -c
    $mod+n exec ~/.config/rofi/rofi.sh -n
    $mod+e exec ~/.config/rofi/rofi.sh -p
    Print exec  ~/.config/rofi/rofi.sh -s
    $mod+m exec ~/.config/rofi/rofi.sh -e
    $mod+Return exec termite
    $mod+Tab exec pcmanfm
    $mod+a exec firefox
    $mod+t exec telegram-desktop
    $mod+o gaps outer current set $outer; gaps inner current set $inner
    $mod+i gaps outer current set 0; gaps inner current set 0
    XF86AudioRaiseVolume exec pactl set-sink-volume 0 +5%
    XF86AudioLowerVolume exec pactl set-sink-volume 0 -5%
    XF86AudioMute exec pactl set-sink-mute 0 toggle
    XF86MonBrightnessUp exec light -A 10
    XF86MonBrightnessDown exec light -U 10
    $mod+Shift+r reload
}
